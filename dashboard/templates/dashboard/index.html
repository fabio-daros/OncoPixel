{% extends "shared/base.html" %}
{% load static i18n widget_tweaks %}

{% block title %}{% trans "Dashboard" %} - OncoPixel{% endblock %}

{% block content %}

<div class="max-w-7xl mx-auto space-y-8">

  <!-- Header -->
  <header class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
    <div>
      <h1 class="text-3xl md:text-4xl font-semibold text-white">
        {% trans "Dashboard" %}
      </h1>
      <p class="text-gray-400 mt-1">
        {% trans "Quickly access the modules and follow your work." %}
      </p>
    </div>
    <div class="text-sm text-gray-400">
      {% trans "Welcome" %}, {{ user.first_name|default:user.username }} 👋
    </div>
  </header>

  <!-- KPIs (placeholders) -->
  <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
    <div class="rounded-2xl border border-gray-700 bg-gray-800/60 p-5">
      <p class="text-gray-400 text-sm">{% trans "Uploads" %}</p>
      <p class="text-3xl text-white font-semibold mt-2">12</p>
    </div>
    <div class="rounded-2xl border border-gray-700 bg-gray-800/60 p-5">
      <p class="text-gray-400 text-sm">{% trans "Active patients" %}</p>
      <p class="text-3xl text-white font-semibold mt-2">37</p>
    </div>
    <div class="rounded-2xl border border-gray-700 bg-gray-800/60 p-5">
      <p class="text-gray-400 text-sm">{% trans "Accuracy (last training)" %}</p>
      <p class="text-3xl text-white font-semibold mt-2">70%</p>
    </div>
    <div class="rounded-2xl border border-gray-700 bg-gray-800/60 p-5">
      <p class="text-gray-400 text-sm">{% trans "Average time analysis" %}</p>
      <p class="text-3xl text-white font-semibold mt-2">18s</p>
    </div>
  </section>

  <!-- Main shortcuts -->
  <section class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

    <!-- Image Analysis -->
    <a href="{% url 'image_analysis:upload_image' %}"
       class="group rounded-2xl border border-gray-700 bg-gray-800/60 p-6 hover:shadow-lg hover:border-gray-600 transition">
      <div class="flex items-start justify-between">
        <div>
          <h2 class="text-xl text-white font-semibold">{% trans "Cervix Analysis" %}</h2>
          <p class="text-gray-400 mt-1">{% trans "Send a cytological image and view the result." %}</p>
        </div>
        <i class="fa-solid fa-microscope text-2xl text-gray-300 group-hover:text-white"></i>
      </div>
      <div class="mt-5">
        <span class="inline-block text-sm bg-green-700/20 text-green-300 border border-green-700/40 px-3 py-1 rounded-full">
          {% trans "Faster R-CNN + ViT" %}
        </span>
      </div>
    </a>

    <!-- Records / History -->
    <a href="{% url 'image_analysis:search_patient' %}"
       class="group rounded-2xl border border-gray-700 bg-gray-800/60 p-6 hover:shadow-lg hover:border-gray-600 transition">
      <div class="flex items-start justify-between">
        <div>
          <h2 class="text-xl text-white font-semibold">{% trans "Records" %}</h2>
          <p class="text-gray-400 mt-1">{% trans "Search previous analyzes by the patient ID." %}</p>
        </div>
        <i class="bi bi-collection text-2xl text-gray-300 group-hover:text-white"></i>
      </div>
      <div class="mt-5">
        <span class="inline-block text-sm bg-blue-700/20 text-blue-300 border border-blue-700/40 px-3 py-1 rounded-full">
          {% trans "Historic" %}
        </span>
      </div>
    </a>

    <!-- Placeholder of future module -->
    <div class="rounded-2xl border border-dashed border-gray-700 bg-gray-800/30 p-6">
      <h2 class="text-xl text-white font-semibold">{% trans "Reports" %}</h2>
      <p class="text-gray-400 mt-1">{% trans "PDF generation and analysis summaries (soon)." %}</p>
    </div>
  </section>

  <!-- Fast + Recent Actions -->
  <section class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2 rounded-2xl border border-gray-700 bg-gray-800/60 p-6">
      <h3 class="text-white text-lg font-semibold">{% trans "Rapid actions" %}</h3>
      <div class="mt-4 flex flex-wrap gap-3">
        <a href="{% url 'image_analysis:upload_image' %}"
           class="px-4 py-2 rounded-lg bg-green-700 hover:bg-green-800 text-white text-sm">
          {% trans "New upload" %}
        </a>
        <a href="{% url 'image_analysis:search_patient' %}"
           class="px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white text-sm">
          {% trans "Find patient" %}
        </a>
        <button disabled
           class="px-4 py-2 rounded-lg bg-gray-700/60 text-white/60 text-sm cursor-not-allowed">
          {% trans "New report" %}
        </button>
      </div>
    </div>

    <div class="rounded-2xl border border-gray-700 bg-gray-800/60 p-6">
      <h3 class="text-white text-lg font-semibold">{% trans "Recent" %}</h3>
      <ul class="mt-3 space-y-2 text-gray-300 text-sm">
        <li>HSIL · <span class="text-gray-400">{% trans "patient" %} #127 · 10:22</span></li>
        <li>NILM · <span class="text-gray-400">{% trans "patient" %} #103 · 09:10</span></li>
        <li>LSIL · <span class="text-gray-400">{% trans "patient" %} #98 · 08:47</span></li>
      </ul>
    </div>
  </section>

</div>

{% endblock %}