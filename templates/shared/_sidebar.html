{% load static i18n widget_tweaks %}

{# Backdrop to click outside and close #}
<div x-show="sidebarOpen" x-cloak
     @click="sidebarOpen=false"
     class="fixed inset-0 bg-black/40 z-40"
     x-transition.opacity></div>

<aside x-show="sidebarOpen" x-cloak
       class="fixed top-0 left-0 w-64 h-full bg-gray-800 text-white z-50 p-6 shadow-lg transform transition-transform"
       x-transition:enter="transition ease-out duration-200"
       x-transition:enter-start="-translate-x-full"
       x-transition:enter-end="translate-x-0"
       x-transition:leave="transition ease-in duration-200"
       x-transition:leave-start="translate-x-0"
       x-transition:leave-end="-translate-x-full"
       role="dialog" aria-modal="true" aria-label="Sidebar navigation"
       @keydown.escape.window="sidebarOpen=false">

  <div class="flex items-center justify-between mb-6">
    <span class="text-3xl font-bold text-white">
      Onco<span class="text-green-500">Pixel</span>
    </span>
  </div>

  <nav class="space-y-1">
    <a href="{% url 'dashboard:home' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-600 {% if request.resolver_match.app_name == 'dashboard' and request.resolver_match.url_name == 'home' %}bg-gray-600{% endif %}">
      <i class="fa-solid fa-chart-line"></i> {% trans "Dashboard" %}
    </a>

    <a href="{% url 'patients:patients' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-600
              {% if request.resolver_match.app_name == 'patients' and request.resolver_match.url_name == 'patients' %}bg-gray-600{% endif %}">
      <i class="fa-solid fa-users"></i> {% trans "Patients" %}
    </a>

    <a href="{% url 'image_analysis:upload_image' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-600 {% if request.resolver_match.app_name == 'image_analysis' and request.resolver_match.url_name == 'upload_image' %}bg-gray-600{% endif %}">
      <i class="fa-solid fa-microscope"></i> {% trans "Cervix Analysis" %}
    </a>

    <a href="{% url 'image_analysis:upload_image' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-600 {% if request.resolver_match.app_name == 'image_analysis' and request.resolver_match.url_name == 'upload_image' %}bg-gray-600{% endif %}">
      <i class="fa-solid fa-ribbon"></i> {% trans "Breast Analysis" %}
    </a>

    <a href="{% url 'image_analysis:upload_image' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-600 {% if request.resolver_match.app_name == 'image_analysis' and request.resolver_match.url_name == 'upload_image' %}bg-gray-600{% endif %}">
      <i class="fa-solid fa-vials"></i> {% trans "Melanoma Analysis" %}
    </a>

    <a href="{% url 'image_analysis:upload_image' %}"
       class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-600 {% if request.resolver_match.app_name == 'image_analysis' and request.resolver_match.url_name == 'upload_image' %}bg-gray-600{% endif %}">
      <i class="fa-solid fa-vial"></i> {% trans "Proteome Analysis" %}
    </a>

    {% block sidebar_extra %}{% endblock %}
  </nav>

  <div class="mt-6 border-t border-gray-700 pt-4 text-sm text-gray-300">
    <a href="/admin/" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-600">
      <i class="fa-solid fa-shield-halved"></i> {% trans "Admin" %}
    </a>
  </div>
    <div class="mt-6 border-gray-700 pt-2 text-xs text-gray-500 text-center">
        version: {{ APP_VERSION }}
    </div>
</aside>
